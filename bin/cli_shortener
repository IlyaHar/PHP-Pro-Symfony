#!/usr/bin/env php
<?php

use App\MyShortener\Repository\FileRepository;
use App\MyShortener\UrlDecoder;
use App\MyShortener\UrlEncoder;
use App\MyShortener\Validators\UrlValidator;

require_once __DIR__ . '/../vendor/autoload.php';

$file = __DIR__ . '/../storage/storage.json';

$validator = new UrlValidator();
$fileRepository = new FileRepository($file);
$encoder = new UrlEncoder($validator, $fileRepository, 5);
$decoder = new UrlDecoder($fileRepository);

echo $encoder->encode('https://ithillel.com') . PHP_EOL;
echo $decoder->decode('8o7hp') . PHP_EOL;

